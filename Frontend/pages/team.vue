<template>
  <div>
    <Banner />
    <navigation-drawer
      v-if="drawer"
      :drawer="drawer"
      :user-id="userId"
      @toggle-drawer="drawer = !drawer"
    />
    <v-container class="grey lighten-5">
      <v-row no-gutters>
        <v-col
          class="d-flex pa-5"
          cols="12"
          sm="4"
        >
          <v-select
            flat
            :items="countries"
            label="Location"
            solo
          />
        </v-col>

        <v-col
          class="d-flex pa-5"
          cols="12"
          sm="4"
        >
          <v-select
            flat
            :items="titles"
            label="Title"
            solo
          />
        </v-col>

        <v-col
          class="d-flex pa-5"
          cols="12"
          sm="4"
        >
          <v-text-field
            flat
            label="Search"
            solo
            append-icon="mdi-map-marker"
          />
        </v-col>
      </v-row>

      <v-row no-gutters>
        <template v-if="!getTeamMembers">
          <v-col
            v-for="i in 4"
            :key="i"
            cols="12"
            sm="6"
            md="3"
            class="pa-5"
          >
            <v-skeleton-loader
              class="mx-auto"
              max-width="300"
              type="card"
            />
          </v-col>
        </template>
        <v-col
          v-for="(member, i) in getTeamMembers"
          :key="i"
          cols="12"
          sm="6"
          md="3"
          class="pa-5 py-0"
        >
          <v-hover v-slot="{ hover }">
            <v-card
              flat
              class="transparent frame overflow-hidden"
            >
              <v-container class="px-0" :class="{'tint' : hover}">
                <v-img
                  class="d-block mx-auto"
                  :src="'/pose' + changeFormat(member.img)"
                  height="100%"
                  max-width="80%"
                />
                <v-card-title class="mx-auto text-center">
                  <p class="text-center mx-auto">
                    {{ member.name }}
                  </p>
                </v-card-title>
                <v-card-subtitle class="text-center">
                  {{ member.career }}
                </v-card-subtitle>
                <div class="details">
                  <h4>{{ member.name }}</h4>
                  <p> {{ member.description }} </p>
                </div>
              </v-container>
            </v-card>
          </v-hover>
        </v-col>
      </v-row>
    </v-container>
  </div>
</template>

<script>
import { mapGetters } from "vuex";
import Banner from "@/components/Core/Banner";


export default {
  components: {
    Banner,
    NavigationDrawer: () => import("~/components/Teams/NavigationDrawer")
  },
  data() {
    return {
      drawer: null,
      userId: null,
      baseUrl: process.env.baseUrl,
      countries: ["Ethiopia", "Turkey", "USA"],
      titles: ["Trainee", "Trainer", "Partners"]
    };
  },
  head: {
    title: "Team"
  },
  computed: {
    ...mapGetters("team", ["getTeamMembers"])
  },
  created() {
    this.$store.dispatch("team/fetchMembers");
  },
  methods: {
    changeFormat(url) {
      return url.replace(/jpeg|jpg|png/, "webp");
    }
  }
};
</script>
<style scoped>
.tint {
  background-color: #eee;
}
.frame {
  text-align: center;
  position: relative;
}
.frame .details {
  height: 95%;
  width: 100%;
  padding: 5% 8%;
  position: absolute;
  content: "";
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotateY(90deg);
  transform-origin: 50%;
  background: rgba(255,255,255,0.9);
  opacity: 0;
  transition: all 0.4s ease-in;
  font-size: 14px;
  font-style: normal;
  overflow-y:scroll;
}
.frame:hover .details {
  transform: translate(-50%, -50%) rotateY(0deg);
  opacity: 1;
}
::-webkit-scrollbar {
  width: 3px;
}
::-webkit-scrollbar-track {
  background: #f1f1f1;
}
::-webkit-scrollbar-thumb {
  background: #5668c6;
}
::-webkit-scrollbar-thumb:hover {
  background: #5668c6;
}
::-webkit-scrollbar-track {
  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
}
</style>
